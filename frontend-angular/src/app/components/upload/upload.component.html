<div class="upload-container">
  <!-- Header -->
  <div class="header">
    <h1>MiniML - Predictive Quality Control</h1>
    <p class="subtitle">Simplified Frontend</p>
    <div class="abb-logo">ABB</div>
  </div>

  <!-- Progress Steps -->
  <div class="progress-steps">
    <div class="step active">
      <div class="step-number">1</div>
      <div class="step-label">Upload Dataset</div>
    </div>
    <div class="step">
      <div class="step-number">2</div>
      <div class="step-label">Date Ranges</div>
    </div>
    <div class="step">
      <div class="step-number">3</div>
      <div class="step-label">Model Training</div>
    </div>
    <div class="step">
      <div class="step-number">4</div>
      <div class="step-label">Simulation</div>
    </div>
    <div class="step-badge">Step 1 of 4</div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="upload-section">
      <h2>Upload Dataset</h2>
      
      <!-- Upload Area -->
      <div class="upload-area" 
           [class.drag-over]="isDragOver"
           (dragover)="onDragOver($event)"
           (dragleave)="onDragLeave($event)"
           (drop)="onDrop($event)">
        
        <div *ngIf="!selectedFile && !uploadResponse" class="upload-placeholder">
          <div class="upload-icon">üìÑ</div>
          <p>Click to select a CSV file or drag and drop</p>
          <input type="file" 
                 accept=".csv" 
                 (change)="onFileSelected($event)" 
                 #fileInput 
                 style="display: none;">
          <button class="choose-file-btn" (click)="fileInput.click()">
            Choose File
          </button>
        </div>

        <!-- Selected File Info -->
        <div *ngIf="selectedFile && !uploadResponse" class="selected-file">
          <div class="file-info">
            <div class="file-icon">üìÑ</div>
            <div class="file-details">
              <h3>{{ selectedFile.name }}</h3>
              <p>{{ formatFileSize(selectedFile.size) }}</p>
            </div>
          </div>
          <div class="file-actions">
            <button class="upload-btn" (click)="uploadFile()" [disabled]="isUploading">
              {{ isUploading ? 'Uploading...' : 'Upload' }}
            </button>
            <button class="cancel-btn" (click)="resetUpload()">Cancel</button>
          </div>
        </div>

        <!-- Upload Results -->
        <div *ngIf="uploadResponse && uploadResponse.success" class="upload-results">
          <div class="success-message">
            <div class="success-icon">‚úÖ</div>
            <h3>File uploaded successfully!</h3>
          </div>
          
          <div class="metadata-cards">
            <div class="metadata-card csv-file">
              <div class="card-icon">üìÑ</div>
              <div class="card-content">
                <h4>CSV File</h4>
                <p class="file-name">{{ uploadResponse.dataSummary.fileName }}</p>
                <p class="file-size">{{ uploadResponse.dataSummary.fileSize }}</p>
              </div>
            </div>

            <div class="metadata-card records">
              <div class="card-icon">üìä</div>
              <div class="card-content">
                <h4>Records</h4>
                <p class="value">{{ uploadResponse.dataSummary.totalRecords.toLocaleString() }}</p>
              </div>
            </div>

            <div class="metadata-card columns">
              <div class="card-icon">üìã</div>
              <div class="card-content">
                <h4>Columns</h4>
                <p class="value">{{ uploadResponse.dataSummary.totalColumns }}</p>
              </div>
            </div>

            <div class="metadata-card pass-rate">
              <div class="card-icon">‚úÖ</div>
              <div class="card-content">
                <h4>Pass Rate</h4>
                <p class="value">{{ uploadResponse.dataSummary.passRate }}%</p>
              </div>
            </div>

            <div class="metadata-card date-range">
              <div class="card-icon">üìÖ</div>
              <div class="card-content">
                <h4>Date Range</h4>
                <p class="value">{{ uploadResponse.dataSummary.earliestTimestamp | date:'yyyy-MM-dd' }} to {{ uploadResponse.dataSummary.latestTimestamp | date:'yyyy-MM-dd' }}</p>
              </div>
            </div>
          </div>

          <div class="next-section">
            <button class="next-btn" (click)="proceedToNext()">
              Next
            </button>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="error-message">
        <div class="error-icon">‚ùå</div>
        <p>{{ errorMessage }}</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-left">MiniML POC</div>
    <div class="footer-right">ENGINEERED TO OUTRUN</div>
  </div>
</div>
